<h1 mat-dialog-title>
  <ng-container *ngIf="mode === 'edit' else add">Edit dataset</ng-container>
  <ng-template #add>Add dataset</ng-template>
</h1>

<div mat-dialog-content id="datasetDialog">
  <div [formGroup]="dataset">
    <app-input-wrapper [label]="'Dataset title'" [control]="title"></app-input-wrapper>
    <div class="dialogRow">
      <mat-form-field>
        <mat-label>Estimated type</mat-label>
        <mat-select formControlName="type" required multiple>
          <mat-option *ngFor="let type of FILE_TYPES | keyvalue: originalOrder"
                      [value]="type.value.id">
            {{type.value.label}}
            <span *ngIf="type.value.description"> [{{type.value.description}}]</span>
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div class="dialogRow" *ngIf="dataset.controls.source.value === datasetSource.NEW">
      <mat-form-field>
        <mat-label>Estimated size</mat-label>
        <mat-select formControlName="size">
          <mat-option *ngFor="let size of FILE_SIZES" [value]="size.size">
            {{size.label}}<br/>
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <app-input-wrapper [label]="'Description'" [control]="description" [maxLength]="4000"></app-input-wrapper>
  </div>
  <div class="dialogRow" *ngIf="dataset.controls.source.value === datasetSource.REUSED">
    <mat-form-field>
      <mat-label>Source</mat-label>
      <mat-select [(ngModel)]="datasetId.type">
        <mat-option *ngFor="let id of identifierType | keyvalue: originalOrder" [value]="id.key">
          {{id.key}}<br/>
        </mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field>
      <mat-label>Identifier</mat-label>
      <input matInput [(ngModel)]="datasetId.identifier" maxlength="255">
    </mat-form-field>
  </div>
</div>

<div mat-dialog-actions>
  <button mat-button (click)="onNoClick()">Cancel</button>
  <button mat-button (click)="onDialogClose()" mat-raised-button color="primary" [disabled]="dataset.invalid">
    <ng-container *ngIf="mode === 'edit'">Update</ng-container>
    <ng-container *ngIf="mode === 'add'">Add</ng-container>
  </button>
</div>
