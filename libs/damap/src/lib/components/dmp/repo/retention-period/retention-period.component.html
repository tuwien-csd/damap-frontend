<div class="mat-panel" [formGroup]="dmpForm">
  <mat-accordion>
    <mat-expansion-panel hideToggle>
      <mat-expansion-panel-header>
        <mat-panel-title>
          {{ "dmp.steps.retentionPeriod.title" | translate }}
        </mat-panel-title>
        <mat-icon class="color-icon">edit_calendar</mat-icon>
      </mat-expansion-panel-header>

      <app-info-message>{{
        "info.repositories.retention" | translate
      }}</app-info-message>

      <div class="retention-wrapper">
        <ng-container *ngFor="let dataset of assignedDatasets; index as i">
          <ng-container *ngIf="dataset.value.source === datasetSource.NEW">
            <div formArrayName="datasets">
              <p
                matTooltip="{{ dataset.value.title }}"
                class="dataset-title-text">
                {{ truncate(dataset.value.title, 20) }}
              </p>
              <mat-form-field appearance="fill" [formGroupName]="i">
                <mat-label>{{
                  "dmp.steps.retentionPeriod.question.retentionPeriod"
                    | translate
                }}</mat-label>
                <mat-select formControlName="retentionPeriod">
                  <mat-option *ngFor="let option of options" [value]="option">
                    {{ option }}
                    {{ "dmp.steps.retentionPeriod.years" | translate }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </ng-container>
        </ng-container>
      </div>
    </mat-expansion-panel>
  </mat-accordion>
</div>
